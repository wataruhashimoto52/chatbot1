# Seq2Seq chatbot (ja)

This is seq2seq chatbot implementation. Most credit goes to [1228337123](https://github.com/1228337123/tensorflow-seq2seq-chatbot) and [AvaisP](https://github.com/AvaisP/Neural_Conversation_Models). I'm just reimplmenting their work to have better understandings on seq2seq. This chat bot is optimized for Japanese. You may replace existing tokenizer with one for your language.

Main differences of my implementation are
- More comments
- Easy to understand input/output format for each processes

## Requirements
- Python 3.6
- TensorFlow 1.2
- MeCab
- Tweepy

## Demo

1. Prepare train data.

    1, Registration to the Twitter API(https://apps.twitter.com).

    2, Extraction of consumerkey, consumer secret key, access token key and access token secret key.

    3, Installation forego.

    `$ brew install forego`

    Then, please make `.env` file and write consumerkey, consumer secret key, access token key and access token secret key.

    `$ vi .env` 

    ```
    CONSUMER_KEY=...
    CONSUMER_SECRET=...
    ACCESS_TOKEN=...
    ACCESS_TOKEN_SECRET=...
    ```

    4, `$ forego run python twitter_replies.py data/source.txt data/target.txt`
2. Preprocess the train data and generate vocabulary files, ID files, and some ones.

    `$ python data_processor.py`  

3. Train seq2seq chatbot. When perplexity went down sufficiently and you think it's time to run, just ctrl-c to stop learning. 

    `$ python train.py`

4. Let's talk to him.  

    `$ python predict.py`


## Dockerization

### Requirements

- Docker 17.06.1-ce

- Docker Compose 1.15.0

### Start application

```bash
docker-compose up
```

You can then view the Jupyter Notebook by opening url generated by the above command in your browser.

### Run chat server

```bash
docker-compose exec app bash -c 'FLASK_APP=server.py flask run --host=0.0.0.0'

curl http://localhost:5000/talk?q=おはよう
お は よ

curl http://localhost:5000/talk?q=こんにちは
こんにちワニ
```

## Contribution

### Author

- [wataruhashimoto52](https://github.com/wataruhashimoto52)

## Reference

- [seq2seq の chatbot を日本語で動かしてみた](http://d.hatena.ne.jp/higepon/20170428/1493382521)

- [About Chatbot](https://www.youtube.com/results?search_query=Chatbot+Siraj+Raval)

[![About Chatbot](https://i.ytimg.com/vi/SJDEOWLHYVo/hqdefault.jpg)](https://www.youtube.com/results?search_query=Chatbot+Siraj+Raval "About Chatbot")
